# 用例文档

# 0. 小组成员及分工

## 1. 成员名单

| 姓名           | 学号      |
| -------------- | --------- |
| 薛瑞宸（组长） | 211250142 |
| 王铭嵩         | 211250143 |
| 杨胜寒         | 211250179 |
| 王靖森         | 211250136 |

## 2. 分工

- 薛瑞宸：
  - 1.引言
  - 2.1用例图
  - 3.用例列表
  - 4.详细用例描述-用例1，用例2，用例3
- 王靖森
  - 4.详细用例描述-用例4，用例5
- 王铭嵩
  - 4.详细用例描述-用例6、用例7
- 杨胜寒
  - 4.详细用例描述-用例7、用例8

# 1. 引言

## 1.1 目的

本文档描述了互联网购票乘车系统EasyGoing的用户需求。其中，用户包括客户与铁路管理员

## 1.2 阅读说明

用例描述的约定为：

1. 用例描述的用例来源于用例图
2. 用例描述更新时，需要填写最后一次的更新者与更新日志
3. 用例在后续迭代中还会产生变动

## 1.3 参考文献

[1]骆斌，丁二玉，刘钦. 软件工程与计算.卷二,软件开发的技术基础.volume Ⅱ, Fundamentals of software development technology[M]. 机械工业出版社, 2012.

## 1.4 git规范

1. 使用git提交与文档相关的变动时，commit信息格式为："doc:..."。如："doc:修改用例3的主要流程2"

# 2. 用例图

![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/UseCase.jpg)



# 3. 用例列表

| **参与者**   | **用例**             | **负责人** |
| ------------ | -------------------- | ---------- |
| 客户、管理员 | 1.注册登录           | @薛瑞宸    |
| 客户、管理员 | 2.浏览维护基本信息   | @薛瑞宸    |
| 客户         | 3.查询信用积分       | @薛瑞宸    |
| 客户         | 4.搜索需要的车票     | @王靖森    |
| 客户         | 5.查看车票细节信息   | @王靖森    |
| 客户         | 6.购买车票           | @王铭嵩    |
| 管理员       | 7.管理铁路路线的信息 | @杨胜寒    |
| 管理员       | 8.设置车票信息       | @杨胜寒    |

# 4. 详细用例描述

## 4.1 注册登录

| **ID**             | 1                              |
| ------------------ | ------------------------------ |
| **名称**           | 注册登录                       |
| **创建者**         | @薛瑞宸                        |
| **创建日期**       | 2023.04.10                     |
| **最后一次更新者** | @薛瑞宸                        |
| **最后更新日期**   | 2023.04.13                     |
| **更新日志**       | 更改扩展流程中”密码错误“的描述 |

- **参与者**
  - 客户、铁路管理员。目标是用户可以使用自己的身份信息进行注册，注册后可以使用账号进行登录。登录后，客户可以进一步进行车票检索、购票等后续操作，管理员可以进一步进行管理铁路信息、设置车票信息等后续操作
- **触发条件**
  - 用户进入系统登录页面，或进入注册界面
- **前置条件**
  - 用户可以正常使用系统
- **后置条件**
  - 用户成功注册后，存储用户的手机号、密码等信息
  - 用户成功登录后，进入系统主页
- **优先级**
  - 高
- **正常流程**
  - 1.用户进入登录页面，若用户已注册，则输入手机号和密码，进行登录
  - 2.登录成功，页面提示成功信息
  - 3.若用户尚未注册，则进入注册页面进行注册
  - 4.进入注册页面，输入手机号、密码等信息，选择一种用户角色，用户确认注册
  - 5.注册成功，页面提示注册成功信息
  - 6.用户回到第1步，进行登录
- **扩展流程**
  - 1a.登录时，用户未输入信息就进行登录
    - 1.登录失败，页面提示用户“输入不得为空”，回到正常流程第1步
  - 1b.登录时，用户输入未注册手机号或不合法手机号，不合法手机号指非11位手机号或含非法字符的手机号
    - 1.登录失败，页面提示用户“请输入合法信息”，回到正常流程第1步
  - 1c.登录时，用户输入的手机号已被注册，且密码不正确
    - 1.登录失败，页面提示用户“密码输入错误”，回到正常流程第1步
  - 4a.注册时，用户未输入手机号就进行注册
    - 1.注册失败，页面提示用户“输入不得为空”，回到正常流程第4步
  - 4b.注册时，用户输入的手机号已被注册
    - 1.注册失败，页面提示用户“该手机号已被注册”，回到正常流程第4步
  - 4c.注册时，用户输入不合法手机号，不合法手机号指非11位手机号或含非法字符的手机号
    - 1.注册失败，页面提示用户“请输入合法信息”，回到正常流程第4步
- **特殊需求**
  - 1.登录时，若用户密码输入错误次数过多，则系统要求用户进行安全验证
  - 2.登录时，系统提供密码修改功能，若用户忘记密码，可以通过手机验证码等方式进行密码修改
  - 3.手机号地区默认为中国大陆(+86)

## 4.2 浏览维护基本信息

| **ID**             | 2                        |
| ------------------ | ------------------------ |
| **名称**           | 浏览维护基本信息         |
| **创建者**         | @薛瑞宸                  |
| **创建日期**       | 2023.04.10               |
| **最后一次更新者** | @薛瑞宸                  |
| **最后更新日期**   | 2023.04.13               |
| **更新日志**       | 补充”不合法手机号“的定义 |

- **参与者**
  - 客户、管理员。目标是用户在注册登录后，可以查看姓名、联系方式、身份证号等个人信息，并可以通过再次验证的方式修改姓名、联系方式、身份证号等个人信息
- **触发条件**
  - 用户进入个人基本信息页面
- **前置条件**
  - 用户已注册登录系统
- **后置条件**
  - 用户修改个人信息后，更新用户的个人信息
- **优先级**
  - 高
- **正常流程**
  - 1.用户进入个人基本信息界面，可以查看姓名、联系方式、身份证号等个人基本信息
  - 2.用户需要修改个人基本信息，则进入修改页面
  - 3.用户若要修改手机号，则使用新的手机号进行验证和绑定
  - 4.修改成功，页面提示“手机号修改成功”
  - 5.用户若要修改手机号以外的信息，则需要使用当前手机号进行验证
  - 6.验证成功，页面提示“信息修改成功”
  - 7.回到修改页面
- **扩展流程**
  - 3a.修改手机号时，用户输入的新手机号不合法，不合法手机号指非11位手机号或含非法字符的手机号
    - 1.修改失败，页面提示“请输入合法手机号”，回到正常流程第2步
  - 3b.修改手机号时，用户输入的手机号已被注册
    - 1.修改失败，页面提示“该手机号已被注册”，回到正常流程第2步 5a.用户验证手机号时，没有成功进行验证
    - 1.验证失败，页面提示“验证失败”，回到正常流程第2步
- **特殊需求**
  - 1.手机号地区默认为中国大陆(+86)

## 4.3 查询信用积分

| **ID**             | 3            |
| ------------------ | ------------ |
| **名称**           | 查询信用积分 |
| **创建者**         | @薛瑞宸      |
| **创建日期**       | 2023.04.10   |
| **最后一次更新者** | @薛瑞宸      |
| **最后更新日期**   | 2023.04.16   |
| **更新日志**       | 完善特殊需求 |

- **参与者**
  - 客户。目标是用户在注册登录后，可以查看自己的信用积分
- **触发条件**
  - 用户进入个人信用积分界面
- **前置条件**
  - 用户已注册登录系统
- **后置条件**
  - 用户查看到自己的信用积分
- **优先级**
  - 中
- **正常流程**
  - 1.用户进入个人信用积分界面，进行查询操作
  - 2.系统显示信用积分
- **扩展流程**
  - 2a.系统信用积分过低
    - 1.页面提示用户注意维护自己的信用积分
- **特殊需求**
  - 1.信用积分采用整数进行计分
  - 2.信用积分低于20时，系统将其视为信用积分过低

## 4.4 搜索需要的车票

| **ID**             | 4                              |
| ------------------ | ------------------------------ |
| **名称**           | 搜索需要的车票                 |
| **创建者**         | @王靖森                        |
| **创建日期**       | 2023.04.10                     |
| **最后一次更新者** | @王靖森                        |
| **最后更新日期**   | 2023.04.17                     |
| **更新日志**       | 合并客户和管理员的搜索车票用例 |

- **参与者**
  - 用户。目标是用户可以通过输入出发站、目的站、出行日期信息来检索需要的车票。车票完成检索后，车票信息以列表方式展现，以供用户选择和查看。
- **触发条件**
  - 用户进入车票检索页面
- **前置条件**
  - 用户已经登录系统
- **后置条件**
  - 用户检索车票后，以列表方式展现车票信息，后续可以通过选择车票来单独查看车票信息
- **优先级**
  - 高
- **正常流程**
  - 1.用户进入车票检索页面
  - 2.用户输入出发站、目的站、出行日期信息
  - 3.系统进行车票检索
  - 4.系统默认以列表方式展现车票信息
  - 5.用户可以重新输入车票信息检索
- **扩展流程**
  - 2a.用户输入非法出发站信息
    - 3.提示输入出发站信息不合法
  - 2a.用户输入非法目的站信息
    - 3.提示输入目的站信息不合法
  - 2a.用户输入出行日期信息
    - 3.提示输入出行日期信息不合法
  - 4a.系统车票检索失败
    - 5.系统提示用户无符合条件的车票
- **特殊需求**
  - 1.默认使用简体中文
  - 2.兼容使用换行键作为确认键
  - 3.默认使用北京时间

## 4.5 查看车票细节信息

| **ID**             | 5                      |
| ------------------ | ---------------------- |
| **名称**           | 查看车票细节信息       |
| **创建者**         | @王靖森                |
| **创建日期**       | 2023.04.10             |
| **最后一次更新者** | @王靖森                |
| **最后更新日期**   | 2023.04.17             |
| **更新日志**       | 修改扩展流程和特殊需求 |

- **参与者**
  - 客户。目标是用户可以在检索完成并以列表方式查看车票后，点击想要查看的单个车票，以单独查看该车票的细节信息，包括车厢号、座位号、一二等座。
- **触发条件**
  - 用户点击单个车票
- **前置条件**
  - 用户已经完成检索车票
- **后置条件**
  - 用户点击单个车票后，可以查看车票细节信息
- **优先级**
  - 高
- **正常流程**
  - 1.用户完成车票检索后进入车票查看界面
  - 2.用户在车票查看界面滑动查看
  - 3.用户点击车票列表中想要查看的车票
  - 4.用户进入该车票细节信息页面，进行查看
  - 5.系统展现车票细节信息，包括出发站、目的站、出行日期、车票座位、车票位置、车票余量、车票车次等次信息
- **扩展流程**
  - 4a.系统刷新导致车票细节信息改变
    - 5.系统刷新改变车票细节信息
- **特殊需求**
  - 1.车票默认使用简体中文
  - 2.车票时间默认为北京时间

## **4.6 购买车票**

| **ID**             | 6                |
| ------------------ | ---------------- |
| **名称**           | 购买车票         |
| **创建者**         | @王铭嵩          |
| **创建日期**       | 2023.04.10       |
| **最后一次更新者** | @王铭嵩          |
| **最后更新日期**   | 2023.04.14       |
| **更新日志**       | 增加恶意用户检查 |

- **参与者**
  - 客户。目标是用户可以选择车次及坐席后购买一定数量车票。                               
- **触发条件**
  - 进入车票详情页面
- **前置条件**
  - 用户已经作为客户登录系统
  - 用户在车票详情页面                                     
- **后置条件**
  - 更新用户购票信息和余票信息
- **优先级**
  - 高
- **正常流程**
  - 1.用户选择座别
  - 2.用户选择订票数量
  - 3.用户可选择根据车厢座位示意图选择期望的坐席
  - 4.用户确认购票
  - 5.系统生成订单
  - 6.用户选择现金或积分购票
  - 7.若用户选择现金，移交第三方系统支付
  - 8.用户成功支付
  - 9.系统返回购票成功及车票信息，并更新用户购票信息和余票信息
- **扩展流程**：
  - 1a.用户选择了无余票的座别
    - 1.拒绝选择操作，返回“无余票”错误信息，回到正常流程1
  - 3a.用户选择了多于订票数量的坐席
    - 2.拒绝选择操作
  - 4a.用户将要预定的车票数量大于本日剩余可订车票上限
    - 3.返回“超过上限”信息，回到正常流程2
  - 4b.用户已被标记为恶意用户
    - 4.返回“恶意用户”信息，终止购买车票流程
  - 5a.下订单时无余票
    - 5.返回“无余票”错误信息，刷新页面
  - 6a.用户选择积分支付
    - 7.检查用户是否为铁路会员
      - 7a.若用户是铁路会员，检查用户积分是否足够支付车票
        - 1.若足够支付，向用户确认支付
          - 1a.用户确认支付，回到正常流程8
          - 1b.用户取消支付，回到正常流程6
        - 2.若不足够支付，返回“积分不足”提示，回到正常流程7
      - 7b.若用户不是铁路会员，返回“非会员”提示，回到正常流程7
  - 6b.用户取消支付
    - 9.保留订单信息，更新余票信息，提示用户在1h内完成支付
  - 8a.用户支付失败
    - 9.保留订单信息，更新余票信息，提示用户在1h内完成支付
- **特殊需求**
  - 1.座别包括“一等座”和“二等座”
  - 2.订票数量最低为1，最高为5
  - 3.坐席包括ABCDEF
  - 4.每个用户每日订票上限为5张

## 4.7 管理铁路路线信息

| **ID**             | 7                                    |
| ------------------ | ------------------------------------ |
| **名称**           | 管理铁路路线信息                     |
| **创建者**         | @王铭嵩                              |
| **创建日期**       | 2023.04.10                           |
| **最后一次更新者** | @杨胜寒                              |
| **最后更新日期**   | 2023.04.13                           |
| **更新日志**       | 细化流程，与设置车票信息用例流程统一 |

- **参与者**
  - 铁路管理员。目标是设置铁路路线的信息和增删路线
- **触发条件**
  - 铁路管理员在铁路管理页面选择“管理铁路路线信息”，进入铁路路线信息管理页面
- **前置条件**
  - 用户已经作为铁路管理员登录系统，且可以正常使用系统
- **后置条件**
  - 系统实时更新铁路路线信息
- **优先级**
  - 高
- **正常流程**
  - 1.0修改已有路线信息
    - 1.铁路管理员输入铁路路线编号
    - 2.系统显示该路线信息
    - 3.铁路管理员编辑路线信息
    - 4.铁路管理员确认
      - 4a.铁路管理员取消
        - 1.系统取消该流程
    - 5.系统更新该路线信息
- **扩展流程**
  - 1.1添加路线
    - 1.铁路管理员选择“添加路线”
    - 2.铁路管理员编辑路线信息
    - 3.铁路管理员确认
      - 3a.铁路管理员取消
        - 1.系统取消该流程
    - 4.系统记录新增的路线信息
  - 1.2删除路线
    - 1.铁路管理员输入铁路路线编号
    - 2.系统显示该路线信息
    - 3.铁路管理员选择删除该路线
    - 4.铁路管理员确认
      - 4a.铁路管理员取消
        - 1.系统取消该流程
    - 5.系统移除该路线信息
- **特殊需求**
  - 1.若铁路管理员添加的路线已存在，系统需提示路线已存在
  - 2.若铁路管理员输入的路线编号不存在，系统需提示路线不存在

## 4.8 设置车票信息

| **ID**             | 8                                        |
| ------------------ | ---------------------------------------- |
| **名称**           | 设置车票信息                             |
| **创建者**         | @杨胜寒                                  |
| **创建日期**       | 2023.04.10                               |
| **最后一次更新者** | @杨胜寒                                  |
| **最后更新日期**   | 2023.04.13                               |
| **更新日志**       | 细化流程，与管理铁路路线信息用例流程统一 |

- **参与者**
  - 铁路管理员。目标是设置车票的各种详细信息和增删车票
- **触发条件**
  - 铁路管理员在铁路管理页面选择“设置车票信息”，进入车票设置页面
- **前置条件**
  - 用户已经作为铁路管理员登录系统，且可以正常使用系统
- **后置条件**
  - 系统实时更新车票信息
- **优先级**
  - 高
- **正常流程**
  - 1.0修改已有车票信息
    - 1.铁路管理员输入车票编号
    - 2.系统显示该车票信息，包括出发站，目的站，时间，数目，车次，座位，座位等级，价格
    - 3.铁路管理员编辑车票各项信息
    - 4.铁路管理员确认
      - 4a.铁路管理员取消
        - 1.系统取消该流程
    - 5.系统更新该车票信息
- **扩展流程**
  - 1.1添加车票
    - 1.铁路管理员选择“新增车票”
    - 2.铁路管理员编辑车票详细信息，包括出发站，目的站，时间，数目，车次，座位，座位等级，价格
    - 4.铁路管理员确认
      - 4a.铁路管理员取消
        - 1.系统取消该流程
    - 5.系统记录新增的车票信息
  - 1.2删除车票
    - 1.铁路管理员输入车票编号
    - 2.系统显示该车票信息，包括出发站，目的站，时间，数目，车次，座位，座位等级，价格
    - 3.铁路管理员选择删除该车票
    - 4.铁路管理员确认
      - 4a.铁路管理员取消
        - 1.系统取消该流程
    - 5.系统移除该车票信息
- **特殊需求**
  - 1.若铁路管理员添加的车票已存在，系统需提示车票已存在
  - 2.若铁路管理员输入的车票编号不存在，系统需提示车票不存在
  - 3.铁路管理员设置的车票信息中，时间以北京时间为准
