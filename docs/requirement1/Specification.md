# 软件需求规格说明文档

# 0. 小组成员及分工

## 1. 成员名单

| 姓名           | 学号      |
| -------------- | --------- |
| 薛瑞宸（组长） | 211250142 |
| 王铭嵩         | 211250143 |
| 杨胜寒         | 211250179 |
| 王靖森         | 211250136 |

## 2. 分工

- 薛瑞宸：
  - 2.总体描述
  - 3.2功能需求：3.2.2、3.2.3
- 王靖森
  - 1.引言
  - 3.2功能需求：3.2.4、3.2.5
- 王铭嵩
  - 3.4数据需求
  - 3.5其他需求
  - 3.2功能需求：3.2.1、3.2.6
- 杨胜寒
  - 3.3非功能需求
  - 3.2功能需求：3.2.7、3.2.8

# 1.引言

## 1.1 目的

本文档描述了互联网购票乘车系统”EasyGoing”的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

除特殊说明之外，本文档所包含的需求都是高优先级需求。

## 1.2 范围

互联网购票乘车系统”EasyGoing”是一个新型的车票购票系统，开发的目的是解决传统车票预定购买的不便之处，主要的业务包括：一是全面的展示每趟列车的详细情况，帮助用户进行选择和比较，更好的购票；二是执行信用累计制度，防止恶意订票购票；三是让铁路局能及时了解到所有购票订单的变化动态，让系统及时更新票余量情况；四是帮助顾客建立历史记录，在顾客预订时发挥历史记录的作用。

## 1.3 参考文献

1.中国铁路12306使用说明

2.《软件工程与计算（卷二）：软件开发的技术基础》刘钦、丁二玉著。 

3.互联网购票乘车系统用例文档

4.《中国国家铁路集团有限公司铁路旅客运输规程》

# 2.总体描述

## 2.1 商品前景

随着工作和生活节奏的加快，人们差旅出行的需求迅速提升。疫情管控结束后，人们外出旅行的需求迎来爆发式增长。但传统的车票预定购买模式有着许多不便之处：

- 售票效率低：传统售票采用现金支付，火车站售票窗口需要现金收取，给用户带来颇多不便，也影响了售票效率；
- 信息不及时：铁路传统售票只能提供有限的信息，售票员难以及时更新车票信息，影响用户准确购票；
- 抢票难度大：传统售票模式下，用户必须提前一段时间到达火车站排队抢票，给用户带来不便；

传统车票预定购买方式已无法满足人们的出行需求。在这种形势下，12306、携程旅行等平台大规模进入大众视野，为用户提供便捷的线上购票预定服务。

互联网购票乘车系统“EasyGoing”就是以12306为基础，为了方便用户购票出行、铁路局管理工作而开发的，通过全面展示每趟列车的详细情况，帮助用户进行选择和比较，以此进行更好的购票；同时可以让铁路局能及时了解到所有购票订单的变化动态，及时更新票余量情况。系统可以在一定程度上提高用户出行、铁路管理的效率和便捷度。

### 2.1.2 业务需求

- **BR1**：在系统投入使用一年后，铁路局成功交易量要比系统未使用时提高30%
- **BR2**：在系统投入使用半年后，用户对铁路服务满意度要比系统未使用时提高30%
- **BR3**：在系统投入使用一年后，运营成本要降低15%
  - 范围：人力成本和因铁路路线问题产生的额外非必要成本
  - 度量：检查平均员工数量和平均每10000元售票额的额外成本
- **BR4**：在系统投入使用一年后，铁路局的利润比未使用系统时提高10%
  - 最好情况：15%
  - 最可能情况：10%
  - 最坏情况：5%

## 2.2 商品功能

- **SF1**：为用户提供车票搜索功能
- **SF2**：根据用户的选择进行车票订购
- **SF3**：根据用户和铁路管理员的操作，实时更新余票情况
- **SF4**：根据铁路管理员的操作，实时更新铁路线路信息
- **SF5**：根据铁路线的信息，实时更新用户的车票信息
- **SF6**：管理用户基本信息和信用积分

## 2.3 用户特征

| **用户**   | **用户特征**                                                 |
| ---------- | ------------------------------------------------------------ |
| 客户       | 客户数量不限且远远多于管理员数量。他们对计算机网站的学习使用能力参差不齐，平均呈较低水平。他们希望能够通过简明了的方式，完成线路查询、购票等操作。因此，系统的UI设计需要尽可能做到简洁、易懂，并辅以适当的文字说明，帮助未使用过系统的客户快速上手，防止新客户流失。此外，系统需要根据信用积分等依据，为客户消费提供合适减免，以此提高客户回头率，打好用户群体基础 |
| 铁路管理员 | 铁路管理员有权管理若干条铁路线路。管理员熟悉铁路线路业务，计算机操作水平较高。考虑到我国铁路线路分布广、复杂度高，线路管理工作对铁路管理员的业务要求过高，进而产生过多人力成本。通过网站系统，铁路管理员可以通过可视化方式对线路信息进行相关管理，这要求他们要在铁路工作时间监督铁路运营相关信息，并在必要时及时对铁路路线和相关车票信息进行适当调整 |

## 2.4 约束

- **CON1**：网站系统可以运行在Firefox、Chrome、Safari、Edge浏览器上
- **CON2**：网站系统使用的是Web界面，网页版式与Android和电脑兼容
- **CON3**：项目要使用集成持续方法进行开发
- **CON4**：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告

## 2.5 假设和依赖

- **AE1**：系统的网络状况良好
- **AE2**：系统可以同时处理大量访问，不会崩溃
- **AE3**：使用该系统的用户都能熟练掌握中文，网站不提供英文版式
- **AE4**：网站中涉及的时间均为北京时间

# 3.详细需求描述

## 3.1 对外接口需求

### 3.1.1 用户界面

- **UI1** 用户信息
![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/ui1.png)
- **UI2** 车票列表
![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/ui2.png)
- **UI3** 车票详情
![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/ui3.png)
- **UI4** 铁路管理
  - **UI4.1** 铁路路线信息管理![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/ui4.png)
  - **UI4.2** 路线管理![](https://rashawn.oss-cn-shanghai.aliyuncs.com/course/SECII/docs/requirement1/ui5.png)

### 3.1.2 通信接口

- **CI1**：客户端与服务器使用RMI的方式进行通信
- **CI2**：使用轻量级服务器Tomcat作为项目未注册域名前的临时服务器同客户端进行通信

## 3.2 功能需求

### 3.2.1 注册登录

#### 3.2.1.1 特性描述

顾客通过注册来注册账号，或者通过登录已有的账号，以获得铁路管理员的车票管理、路线管理权限或客户的购买车票、查询积分等权限。

优先级=高

#### 3.2.1.2 刺激/响应序列

刺激：用户选择进入注册页面。

响应：系统展示注册界面。

刺激：用户选择进入登录页面。

响应：系统展示登录界面。

刺激：用户输入手机号。

响应：系统展示手机号是否合法。

刺激：用户输入密码。

响应：系统展示密码是否合法。

刺激：用户注册时输入密码确认。

响应：系统展示确认密码是否与密码一致。

刺激：用户进行登录。

响应：系统检查账号信息并返回结果。

刺激：用户进行注册。

响应：系统检查账号信息并返回结果。

刺激：用户输入错误密码的次数过多。

响应：系统要求用户进行安全验证。

刺激：用户取消登录。

响应：系统退出到上一界面或主页。

#### 3.2.1.3 相关功能需求

| RegisterOrLogin.Account                             | 系统需要记录用户已输入的账号信息，并验证合法性以及验证用户状态。 |
| --------------------------------------------------- | ------------------------------------------------------------ |
| RegisterOrLogin.Account.Number                      | 在用户输入账号信息时，系统需要记录登录/注册手机号码。        |
| RegisterOrLogin.Account.Number.Valid                | 在用户输入手机号码时，系统需要检查手机号码是否合法。         |
| RegisterOrLogin.Account.Number.Invalid              | 用户输入了不合法的手机号码，系统返回相关提示。               |
| RegisterOrLogin.Account.Number.Null                 | 用户未输入手机号码，系统返回相关提示。                       |
| RegisterOrLogin.Account.Password                    | 在用户输入账号信息时，系统需要记录登录/注册密码。            |
| RegisterOrLogin.Account.Password.Valid              | 在用户输入密码时，系统需要检查密码是否合法。                 |
| RegisterOrLogin.Account.Password.Invalid            | 用户输入了不合法的密码，系统返回相关提示。                   |
| RegisterOrLogin.Account.Password.Null               | 用户未输入密码，系统返回相关提示。                           |
|                                                     |                                                              |
| RegisterOrLogin.Register                            | 用户选择注册功能。                                           |
| RegisterOrLogin.Register.PasswordCheck              | 用户在注册时需要确认输入的密码。                             |
| RegisterOrLogin.Register.PasswordCheck.Valid        | 用户输入的确认密码与密码一致，系统返回相关提示。             |
| RegisterOrLogin.Register.PasswordCheck.Invalid      | 用户输入的确认密码与密码不一致，系统返回相关提示。           |
| RegisterOrLogin.Register.PasswordCheck.Null         | 用户未确认密码，系统返回相关提示。                           |
|                                                     |                                                              |
| RegisterOrLogin.Login                               | 用户选择登录功能。                                           |
|                                                     |                                                              |
| RegisterOrLogin.Check                               | 系统将根据用户确认的账号信息，检查注册/登录账号是否成功。    |
| RegisterOrLogin.Check.Register                      | 用户注册账号可能出现的所有结果。                             |
| RegisterOrLogin.Check.Register.Success              | 用户注册账号成功，系统返回相关提示。                         |
| RegisterOrLogin.Check.Register.Failure              | 用户注册账号失败，系统返回相关提示。                         |
| RegisterOrLogin.Check.Register.Failure.AlreadyExist | 注册账号失败因为账号已存在，系统返回相关提示。               |
| RegisterOrLogin.Check.Login                         | 用户登录账号可能出现的所有结果。                             |
| RegisterOrLogin.Check.Login.Success                 | 用户登录帐号成功，系统返回相关提示。                         |
| RegisterOrLogin.Check.Login.Failure                 | 用户登录帐号失败，系统返回相关提示。                         |
| RegisterOrLogin.Check.Login.Failure.WrongPassword   | 登录失败因为密码错误，系统返回相关提示。                     |
| RegisterOrLogin.Check.Login.Failure.NoAccount       | 登录失败因为账号不存在，系统返回相关提示。                   |
| RegisterOrLogin.Check.Login.Failure.Count           | 登录失败次数达到约定值将进入安全验证。                       |
|                                                     |                                                              |
| RegisterOrLogin.Safety                              | 系统在特定情况下要求用户进行安全验证。                       |
| RegisterOrLogin.Safety.Code                         | 系统需要记录用户输入的验证码。                               |
| RegisterOrLogin.Safety.Code.Valid                   | 用户输入正确的验证码，通过安全验证。                         |
| RegisterOrLogin.Safety.Code.Invalid                 | 用户输入了错误的验证码，未通过安全验证，系统返回相关提示。   |

### 3.2.2 浏览维护基本信息

#### **3.2.2.1 特征描述**

在登录的状态下，用户点击“个人信息”按键后，系统进入个人信息界面，用户可以查看到基本信息。若用户要修改信息，则点击对应信息的修改按键，根据系统提示对手机进行验证后，进行新信息的修改，确认后，系统提示用户是否修改成功。

**优先级 = 高**

#### **3.2.2.2 刺激/响应序列**

- 刺激：用户点击“个人信息”按键
- 响应：系统跳转到个人信息界面
- 刺激：用户点击“修改手机号”按键
- 响应：系统提示用户输入新手机号并进行验证
- 刺激：用户点击“取消”
- 响应：系统回到个人信息界面
- 刺激：用户点击”确认“
- 响应：系统进行新手机号的验证
- 刺激：用户正确验证新手机号
- 响应：系统修改用户手机号，并提示用户修改成功
- 刺激：用户点击“修改姓名”或“修改身份证号”
- 刺激：用户点击“取消”
- 响应：系统回到个人信息界面
- 刺激：用户点击”确认“
- 响应：系统进行手机号的验证
- 响应：系统提示用户对绑定的手机号进行验证
- 刺激：用户正确验证手机号
- 响应：系统修改用户信息，并提示用户修改成功

#### **3.2.2.3 相关功能需求**

| 执行对象                     | 对象描述                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| UserInfo.Present             | 系统跳转到”个人信息“界面，展示相关信息                       |
|                              |                                                              |
| UserInfo.PhoneNumber         | 系统允许用户修改手机号                                       |
| UserInfo.PhoneNumber.Modify  | 用户点击“修改手机号”按键                                     |
| UserInfo.PhoneNumber.Input   | 系统提示用户输入新手机号                                     |
| UserInfo.PhoneNumber.Confirm | 用户确认手机号输入                                           |
| UserInfo.PhoneNumber.Cancel  | 用户取消手机号输入                                           |
| UserInfo.PhoneNumber.Verify  | 系统验证新手机号                                             |
| UserInfo.PhoneNumber.Status  | 检查新手机号的修改状态，修改成功和修改失败将返回对应的状态码 |
|                              |                                                              |
| UserInfo.Information         | 系统允许用户修改个人信息                                     |
| UserInfo.Information.Modify  | 用户点击其他信息的修改键                                     |
| UserInfo.Information.Input   | 系统提示用户输入新信息                                       |
| UserInfo.Information.Confirm | 用户确认信息输入                                             |
| UserInfo.Information.Cancel  | 用户取消信息输入                                             |
| UserInfo.Information.Verify  | 系统验证手机号                                               |
| UserInfo.Information.Status  | 检查新信息的修改状态，修改成功和修改失败将返回对应的状态码   |

### 3.2.3 查询信用积分

#### **3.2.3.1 特征描述**

在登录的状态下，用户点击“信用积分”按键后，系统进入信用积分界面，用户可以查看到自己的信用积分。若信用积分小于20，系统提醒用户注意维护信用积分

**优先级 = 中**

#### **3.2.3.2 刺激/响应序列**

- 刺激：用户点击“信用积分”按键
- 响应：系统进入信用积分界面，用户可查看信用积分
- 刺激：用户的信用积分小于20
- 响应：系统提醒用户：“当前您的信用积分过低，请注意维护信用积分，否则将可能影响购票！”

#### **3.2.3.3 相关功能需求**

| 执行对象            | 对象描述                                                     |
| ------------------- | ------------------------------------------------------------ |
| Credit.Present      | 系统跳转到”个人信息“界面，展示相关信息                       |
| Credit.Check        | 系统检查用户信用积分额度                                     |
| Credit.Chek.Warning | 系统提醒用户：“当前您的信用积分过低，请注意维护信用积分，否则将可能影响购票！” |

### 3.2.4 搜索需要的车票

#### 3.2.4.1 特性描述

用户可以通过输入出发站、目的站、出行日期信息来检索需要的车票。

系统进行车票完成检索后，根据车票检索是否成功做出不同表现。车票检索成功则将车票信息以列表方式展现，以供用户选择和查看。否则，提示用户无符合相关条件的车票。

用户可以重新输入车票信息进行检索。

优先级=高

#### 3.2.4.2 刺激/相应序列 

刺激：用户进入车票搜索页面

响应：系统展现车票搜索页面

刺激：用户输入出发站、目的站、出行日期信息并点击车票搜索按键

响应：系统根据用户输入的出发站、目的站、出行日期信息来检索需要的车票，若检索成功则以列表方式展现，否则提示用户无符合相关条件的车票

刺激：用户输入非法出发站信息并点击车票搜索按键

响应：系统提示输入出发站错误

刺激：用户输入非法目的站信息并点击车票搜索按键

响应：系统提示输入目的站错误

刺激：系统输入非法出行日期信息并点击车票搜索按键

响应：系统提示输入出行日期错误

#### 3.2.4.3 相应功能需求

| SearchTickets.Search                 | 系统可以搜索车票                                             |
| ------------------------------------ | ------------------------------------------------------------ |
| SearchTickets.Search.Find            | 系统应该可以根据输入的出发站、目的站、出行日期信息来检索需要的车票 |
| SearchTickets.Search.Status          | 系统应该可以判断车票检索是否成功                             |
| SearchTickets.Search.Status.Success  | 系统应该可以根据车票检索成功，来以列表方式展现车票           |
| SearchTickets.Search.Status.Failure  | 系统应该可以根据车票检索失败，提示用户无符合相关条件的车票   |
|                                      |                                                              |
| SearchTickets.Check                  | 系统可以处理非法输入信息                                     |
| SearchTickets.Check.InvaildDeparture | 系统应该可以处理输入出发站非法的情况                         |
| SearchTickets.Check.InvaildArrival   | 系统应该可以处理输入目的站非法的情况                         |
| SearchTickets.Check.InvaildDate      | 系统应该可以处理输入出行日期非法的情况                       |

### 3.2.5 查看车票细节信息

#### 3.2.5.1 特性描述

用户可以在检索完成并以列表方式查看车票后，点击想要查看的单个车票，以单独查看该车票的细节信息，包括车厢号、座位号、一二等座。

优先级=高

#### 3.2.4.2 刺激/相应序列

刺激：用户点击想要查看的单个车票

响应：系统根据用户点击的单个车票，显示该车票的详细细节信息

#### 3.2.4.3 相应功能需求

| ShowTicket.Show | 系统可以显示选中车票的详细细节信息 |
| --------------- | ---------------------------------- |
|                 |                                    |

### 3.2.6 购买车票

#### 3.2.6.1 特性描述

帐号状态为非恶意的客户用户可以在车票详情页面选择座别及坐席，在限购范围内购买空余车票。

优先级=高

#### 3.2.6.2 刺激/响应序列

刺激：用户选择座别。

响应：系统展示余票数量及响应坐席。

刺激：用户选择订票数量。

响应：系统检查订票数量是否超过上限。

刺激：用户选择坐席。

响应：系统反馈选择结果，并提示坐席选择并非一定成功。

刺激：用户下订单。

响应：系统检查用户帐号状态，返回错误或移交支付流程。

刺激：用户选择现金支付。

响应：系统移交第三方系统支付并查询支付状态。

刺激：系统检测到支付流程后订单状态仍为未支付状态。

响应：系统提示用户及时支付订单。

刺激：用户选择积分支付。

响应：系统检查积分余额，返回错误或确认请求。

刺激：用户取消积分支付。

响应：系统跳至支付流程开始。

刺激：用户支付成功。

响应：系统更新用户购票信息、余票信息，结束流程。

#### 3.2.6.3 相关功能需求

| BuyTickets.Selection                  | 系统应记录用户选择的将要购买的车票信息。                     |
| ------------------------------------- | ------------------------------------------------------------ |
| BuyTickets.Selection.Class            | 用户选择座别，包括一等座和二等座。                           |
| BuyTickets.Selection.Class.Invalid    | 当前座别已无余票，返回错误，拒绝选择。                       |
| BuyTickets.Selection.Count            | 用户选择的车票数量。                                         |
| BuyTickets.Selection.Seats            | 用户选择的座别。                                             |
|                                       |                                                              |
| BuyTickets.Check                      | 用户下订单时执行检查。                                       |
| BuyTickets.Check.NoLogin              | 用户未登录，系统提示用户注册登陆账号并取消下订单。           |
| BuyTickets.Check.NoTicket             | 用户下订单时系统库存中车票已不足，返回车票不足错误。         |
| BuyTickets.Check.UserIsMalicious      | 用户被标记为恶意用户，拒绝用户的一切购票请求。               |
| BuyTickets.Check.ClassIsNull          | 用户未选择座别。                                             |
| BuyTickets.Check.CountIsZero          | 用户未选择车票数量。                                         |
| BuyTickets.Check.RandomSeats          | 用户未选择坐席，系统将随机出票。                             |
| BuyTickets.Check.Success              | 系统成功生成订单，更新用户购票记录和余票信息。               |
|                                       |                                                              |
| BuyTickets.Purchase                   | 用户支付订单操作。                                           |
| BuyTickets.Purchase.Start             | 一次支付订单操作的开始，用户在此选择支付方式。               |
| BuyTickets.Purchase.Credit            | 用户选择积分方式支付。                                       |
| BuyTickets.Purchase.Credit.NotVIP     | 用户当前不是铁路会员身份，无权使用积分方式购票。             |
| BuyTickets.Purchase.Credit.Inadequate | 用户当前积分不足以支付车票。                                 |
| BuyTickets.Purchase.Credit.Check      | 系统向用户确认是否支付。                                     |
| BuyTickets.Purchase.Credit.Cancel     | 用户取消使用积分支付，系统将跳转至BuyTickets.Purchase.Start。 |
| BuyTickets.Purchase.Cash              | 用户选择现金方式支付。                                       |
| BuyTickets.Purchase.Cash.Cancel       | 用户取消现金支付，系统将跳转至BuyTickets.Purchase.Start。    |
| BuyTickets.Purchase.Payment           | 系统将跳转至外部进行支付。                                   |
| BuyTickets.Purchase.Success           | 系统提示用户支付成功，更新订单状态，结束购票流程。           |
| BuyTickets.Purchase.Failure           | 系统提示用户支付失败，并在规定时间内完成支付。               |

### 3.2.7 管理铁路路线信息

#### 3.2.7.1 特性描述

铁路管理员可以在铁路管理页面选择“管理铁路路线信息”，进入铁路路线信息管理页面，通过输入路线编号，修改铁路路线信息，或添加铁路路线，删除已有铁路路线。

优先级=高

#### 3.2.7.2 刺激/相应序列

刺激：铁路管理员输入铁路路线编号。

响应：系统显示该铁路路线信息。

刺激：铁路管理员编辑铁路路线信息。

响应：系统暂时记录编辑内容。

刺激：铁路管理员确认修改路线信息。

响应：系统更新该路线信息。

刺激：铁路管理员确认添加路线。

响应：系统检查路线是否已存在，进而新增一条铁路路线信息记录或提示路线已存在。

刺激：铁路管理员确认删除路线。

响应：系统移除该路线信息。

刺激：铁路管理员取消操作。

响应：系统取消管理操作，返回铁路路线管理页面。

#### 3.2.7.3 相关功能需求

| Manager.Route.Input                  | 系统允许铁路管理员在铁路路线信息管理页面进行键盘输入         |
| ------------------------------------ | ------------------------------------------------------------ |
| Manager.Route.Input.ID               | 系统允许铁路管理员输入铁路路线编号以查询相关信息             |
| Manager.Route.Input.ID.Valid         | 输入的铁路路线编号对应路线存在时，系统显示对应路线的信息     |
| Manager.Route.Input.ID.Invalid       | 输入的铁路路线编号对应路线不存在时，系统提示路线不存在       |
| Manager.Route.Input.Info             | 铁路管理员编辑铁路路线信息时，系统暂时记录编辑内容           |
|                                      |                                                              |
| Manager.Route.Modify                 | 系统允许铁路管理员修改已有的铁路路线信息                     |
| Manager.Route.Modify.Confirm         | 铁路管理员确认修改路线信息，系统更新该路线信息               |
| Manager.Route.Modify.Cancel          | 铁路管理员取消修改路线，系统取消修改操作，返回铁路路线管理页面 |
|                                      |                                                              |
| Manager.Route.Append                 | 系统允许铁路管理员添加铁路路线                               |
| Manager.Route.Append.Confirm         | 铁路管理员确认添加路线                                       |
| Manager.Route.Append.Confirm.Valid   | 若对应路线不存在，系统新增一条铁路路线信息记录               |
| Manager.Route.Append.Confirm.Invalid | 若对应路线已存在，系统提示路线已存在                         |
| Manager.Route.Append.Cancel          | 铁路管理员取消添加路线，系统取消添加操作，返回铁路路线管理页面 |
|                                      |                                                              |
| Manager.Route.Remove                 | 系统允许铁路管理员删除铁路路线                               |
| Manager.Route.Remove.Confirm         | 铁路管理员确认删除路线，系统移除该路线信息                   |
| Manager.Route.Remove.Cancel          | 铁路管理员取消删除路线，系统取消删除操作，返回铁路路线管理页面 |

### 3.2.8 设置车票信息

#### 3.2.8.1 特性描述

铁路管理员可以在铁路管理页面选择“设置车票信息”，进入车票设置页面，通过输入车票编号，修改车票信息，或添加车票，删除已有车票。

优先级=高

#### 3.2.8.2 刺激/相应序列

刺激：铁路管理员输入车票编号。

响应：系统显示该车票信息。

刺激：铁路管理员编辑车票信息。

响应：系统暂时记录编辑内容。

刺激：铁路管理员确认修改车票信息。

响应：系统更新该车票信息。

刺激：铁路管理员确认添加车票。

响应：系统检查车票是否已存在，进而新增一条车票记录或提示车票已存在。

刺激：铁路管理员确认删除车票。

响应：系统移除该车票信息。

刺激：铁路管理员取消操作。

响应：系统取消管理操作，返回车票设置页面。

#### 3.2.8.3 相关功能需求

| Manager.Ticket.Input                  | 系统允许铁路管理员在车票设置页面进行键盘输入               |
| ------------------------------------- | ---------------------------------------------------------- |
| Manager.Ticket.Input.ID               | 系统允许铁路管理员输入车票编号以查询相关信息               |
| Manager.Ticket.Input.ID.Valid         | 输入的车票编号对应车票存在时，系统显示对应车票的信息       |
| Manager.Ticket.Input.ID.Invalid       | 输入的车票编号对应车票不存在时，系统提示车票不存在         |
| Manager.Ticket.Input.Info             | 铁路管理员编辑车票信息时，系统暂时记录编辑内容             |
|                                       |                                                            |
| Manager.Ticket.Modify                 | 系统允许铁路管理员修改已有的车票信息                       |
| Manager.Ticket.Modify.Confirm         | 铁路管理员确认修改车票信息，系统更新该车票信息             |
| Manager.Ticket.Modify.Cancel          | 铁路管理员取消修改车票，系统取消修改操作，返回车票设置页面 |
|                                       |                                                            |
| Manager.Ticket.Append                 | 系统允许铁路管理员添加车票                                 |
| Manager.Ticket.Append.Confirm         | 铁路管理员确认添加车票                                     |
| Manager.Ticket.Append.Confirm.Valid   | 若对应车票不存在，系统新增一条车票记录                     |
| Manager.Ticket.Append.Confirm.Invalid | 若对应车票已存在，系统提示车票已存在                       |
| Manager.Ticket.Append.Cancel          | 铁路管理员取消添加车票，系统取消添加操作，返回车票设置页面 |
|                                       |                                                            |
| Manager.Ticket.Remove                 | 系统允许铁路管理员删除车票                                 |
| Manager.Ticket.Remove.Confirm         | 铁路管理员确认删除车票，系统移除该车票信息                 |
| Manager.Ticket.Remove.Cancel          | 铁路管理员取消删除车票，系统取消删除操作，返回车票设置页面 |

## 3.3 非功能需求

### 3.3.1 安全性

Safety1：系统应该只允许经过验证和授权的用户访问。

Safety2：系统应该按照用户的身份验证用户相应的操作权限。

Safety3：用户的账号、密码、身份证、联系方式应该以密文存储。

Safety4：用户只能查看和维护自己的信息。

### 3.3.2 可维护性

Modifiability1：在系统的车票编号或路线编号数据格式发生变化时，系统要能够在3人1天内完成。

Modifiability2：在系统的信用积分规则，奖惩规则或“恶意订票”认定规则发生变化时，系统要能够在3人1周内完成。

### 3.3.3 易用性

Usability1：用户不需要额外的培训，对于任意操作可以在10分钟内完成。

Usability2：车票检索可以在3s内完成。

Usability3：客户购买车票或铁路管理员修改车票信息后，车票信息及余票数量应在1分钟内完成更新。

### 3.3.4 可靠性

Reliability1:在客户端与服务器通信时，如果网络故障，系统不能出现故障。

- Reliability1.1:客户端应该检测到故障，并尝试重新连接网络3次，每次15秒。

-  Reliability1.1.1:重新连接后，客户端应该继续之前的工作。

-  Reliability1.1.2:如果重新连接不成功，客户端应该等待5分钟后再次尝试重新连接。

-   Reliability1.1.2.1:重新连接后，客户端应该继续之前的工作。

-   Reliability1.1.2.2:如果重新连接仍然不成功，客户端报警。

服务器宕机

### 3.3.5 业务规则

BR1：信用积分的抵扣及奖惩规则，该规则可能变化。

客户购买车票时若选择以积分抵扣，按100积分=1元人民币的比例抵扣；积分不能部分抵扣，只能一次性全部使用；积分不能和人民币一起使用，只能选其一。

客户购买车票时可按车票价格的5倍获得对应积分，按照四舍五入原则；积分的有效期是一年，未使用的积分到期自动失效；在乘车之后的5天内，车票积分将会自动计入总积分，并开始计算有效期。

客户被系统判定为“恶意订票”后会损失积分，具体数量？

客户首次使用积分兑换，需在铁路会员注册，并且积分达到了10000，即购买火车票总价达到2000元人民币后，才拥有兑换车票的会员资格，否则不能兑换；第二次使用积分兑换时，没有积分限制，也就是积分足够即可进行兑票。

BR2：“恶意订票”的认定规则，该规则可能变化。

每天超过三次预定之后，不付费或者退票。

购票数量大于规定限额（每天5张）。

通过抢票软件，在1分钟内订票超过3张。

### 3.3.6 约束

IC1：用户和铁路局工作人员分布在不同的地方，要提供各自的web应用部署。

IC2: 系统要在网络上分布为一个服务器和多个客户端。

## 3.4 数据需求

### 3.4.1 数据定义

DR1：系统需要存储的数据实体及其关系参见*附图D_ER*。

DR2：系统需要存储一年之内的购票记录、退票记录。

DR3：系统删除之后的车票、线路、购票信息仍然需存储一个月时间，作为系统检查的数据依据。

### 3.4.2 默认数据

默认数据用于以下情况：

- 系统增加新数据
- 编辑数据时意外清空

Default1：信用积分默认为0。

Default2：车票票价默认为0。

Default3：车票数量默认为0。

Default4：用户登录状态默认为未登录。

Default5：用户名默认为手机号的固定哈希串。

Default6：用户已身份认证默认为false，身份证号为null。

Default7：订单已支付状态默认为false。

### 3.4.3 数据格式要求

Format1：用户密码必须大于等于8位，小于等于20位。

Format3：车票价格必须是大于等于0、精确到小数点后第一位的浮点数，单位为元。

Format4：手机号必须是以1开头的11位纯数字或以861开头的13位纯数字。

Format5：身份证号必须是15位纯数字或18位纯数字+'X'，其中18位身份证必须满足身份证校验规则。

Format6：订票数量必须是大于等于0、小于等于5的整数。

Format7：车次号必须是以'D'或'G'开头+2-5位纯数字格式。

Format8：列车车站名必须是和定义的车站名集合中某一字符串完全匹配的一个字符串。

Format9：信用积分必须是整数

## 3.5 其他需求

部署需求

Deployment1：铁路管理端和客户端分布式部署

Deployment2：前端和后端分布式部署